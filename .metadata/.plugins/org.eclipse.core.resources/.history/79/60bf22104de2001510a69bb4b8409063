package entrega;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Random;
import java.util.Scanner;

public class MenoresM {
	
	//Aqui hay que modificar la ruta y poner donde se tengan los archivos de prueba almacenados,
	//Tambien será donde se guarden los archivos de salida.
	private static String ruta = "C:\\Users\\Kevin\\Dropbox\\Uni\\4º Año\\DA\\Practicas\\Practica 1\\Proyectos Eclipse\\Proy-DA1\\src\\";

	/**
	 * Entrada:
	 * @param ruta -> Ruta donde se encuentra nuestro fichero que queremos leer.
	 * @return -> Vector con todos los elementos del fichero excepto el primero (elementos del vector + num. menores).
	 */
	public static int[] leerPrueba(String ruta) throws IOException{
		int texto; int max;
		int i=0;
				
		FileReader fr = new FileReader(ruta);
		BufferedReader br = new BufferedReader(fr);
		
		max = Integer.parseInt(br.readLine());
		int[] vecElements = new int[max+1];
		while( i < max+1 ){
			texto = Integer.parseInt(br.readLine());
			vecElements[i] = texto;
			i++;
		}
		br.close();
		
		return vecElements;
	}
	
	public static void crearSalida(int[] v, int max, String alg) throws IOException{
		String nombreFich = alg+ "-" +max+ "Menores.txt";
	    File archivo = new File(ruta + nombreFich);
	    BufferedWriter bw;
	    bw = new BufferedWriter(new FileWriter(archivo));
	    	    
	    for(int i=0; i<max; i++){
	    	bw.write(String.valueOf(v[i]));
	    	bw.newLine();
	    }
	    bw.close();
	    
	    System.out.println(" --- Se ha creado el archivo correctamente. ---");
	}
	
	public static void ImpMergeSort(int[] v, int m) throws IOException{
		
		Mergesort.mergeSort(v);
		
		crearSalida(v,m,"MergeSort");
	}
	
	public static void ImpInsertionSort(int[] v, int m) throws IOException{
				
		Insertionsort.insertionSort(v);
		
		crearSalida(v,m,"InsertionSort");
	}
	
	public static void ImpQuickSort(int[] v, int m) throws IOException{
		
		Quicksort.quickSort(v);
		
		crearSalida(v,m,"QuickSort");
	}
	
	public static void ImpSelectionSort(int[] v, int m) throws IOException{
		
		Selectionsort.selectionSort(v);
		
		crearSalida(v,m,"SelectionSort");
	}
	
	public static void ImpHeapSort(int[] v, int m) throws IOException{
		
		Heapsort.heapSort(v);

		crearSalida(v,m,"HeapSort");
	}
	
	public static void ImpSelectKesimo(int[] v, int m) throws IOException{
				
		Selectkesimo.selectKesimo(v,m);
		
		crearSalida(v,m,"SelectKesimo");
	}
	
	public static void main(String[] args) throws IOException{
		
		Scanner scan = new Scanner(System.in);
		
		boolean salir = false;
		int menores = 0;
		long start, end;
		
		System.out.print("** Introduce el nombre del fichero de pruebas a ejecutar (solo nombre, sin extension): ");

		String fichero = scan.next();
		System.out.println();

		String rutaFich = ruta + fichero + ".txt";
		
		int[] aux = leerPrueba(rutaFich);
		menores = aux[aux.length-1];
		int[] v = new int[aux.length-1];

		for(int i=0; i<v.length; i++)
			v[i] = aux[i];
		
		System.out.println("** Introduce el algoritmo de 'Imprimir Menores' que quieres utilizar: ");
		System.out.println("** - 1. Selection Sort");
		System.out.println("** - 2. Insertion Sort");
		System.out.println("** - 3. Merge Sort");
		System.out.println("** - 4. Quick Sort");
		System.out.println("** - 5. Heap Sort");
		System.out.println("** - 6. Select K-esimo");
		System.out.println("** -------------------");
		System.out.print("Introduce Numero (1,2,3,4,5,6) --> ");
		int alg = Integer.parseInt(scan.next());
		System.out.println();
		
		while( salir == false){
			switch(alg){
			
			case 1: 
				start = System.nanoTime();
				ImpSelectionSort(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			case 2:
				start = System.nanoTime();
				ImpInsertionSort(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			case 3:
				start = System.nanoTime();
				ImpMergeSort(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			case 4:
				start = System.nanoTime();
				ImpQuickSort(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			case 5:
				start = System.nanoTime();
				ImpHeapSort(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			case 6:
				start = System.nanoTime();
				ImpSelectKesimo(v,menores);
				end = System.nanoTime();
				salir = true;
				break;
			default:
				System.out.println("   --------------------------------------------------");
				System.out.println("   --- ERROR - Opcion incorrecta, vuelva a elegir ---");
				System.out.println("   --------------------------------------------------");
				System.out.println();
				System.out.println("** Introduce el algoritmo de 'Imprimir Menores' que quieres utilizar: ");
				System.out.println("** - 1. Selection Sort");
				System.out.println("** - 2. Insertion Sort");
				System.out.println("** - 3. Merge Sort");
				System.out.println("** - 4. Quick Sort");
				System.out.println("** - 5. Heap Sort");
				System.out.println("** - 6. Select K-esimo");
				System.out.println("** -------------------");
				System.out.print("Introduce Numero (1,2,3,4,5,6) --> ");
				alg = Integer.parseInt(scan.next());	
				System.out.println();
				salir = false;
				break;
			}
		}

	}
	
}
